<%- include('../partials/_headerAdmin') %>

    <h1>Manage Suppliers</h1>

    <div class="header-actions">
        <a href="/admin/supplier/add" class="btn btn-add">+ Tambah Supplier</a>

        <form action="/admin/suppliers" method="GET" class="search-form">
            <input type="text" name="search" class="search-input" 
                   placeholder="Cari nama, alamat, atau telp..." 
                   value="<%= search %>">
            <button type="submit" class="btn-search">Cari</button>
            <% if(search) { %>
                <a href="/admin/suppliers" class="btn" style="background:#666; padding: 8px 15px;">Reset</a>
            <% } %>
        </form>

        <a href="/admin/supplier/export" class="btn btn-export">Export CSV</a>
    </div>

    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Nama Supplier</th>
                    <th>Email</th>
                    <th>No. Telp</th>
                    <th>Alamat</th>
                    <th>Manage</th>
                </tr>
            </thead>
            <tbody>
                <% if(data.length > 0) { %>
                    <% data.forEach((item, index) => { %>
                    <tr>
                        <td><%= index + 1 %></td>
                        <td><%= item.name_supplier %></td>
                        <td><%= item.email_supplier %></td>
                        <td><%= item.pnumber_supplier %></td>
                        <td><%= item.address_supplier %></td>
                        <td class="actions">
                            <a href="/admin/supplier/edit/<%= item.id_supplier %>" class="btn btn-edit">Edit</a>
                            
                            <form action="/admin/supplier/delete/<%= item.id_supplier %>" method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('Yakin hapus?');">Hapus</button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="6" style="text-align:center;">Data tidak ditemukan.</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

<%- include('../partials/_footerAdmin') %>
